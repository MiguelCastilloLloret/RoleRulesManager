namespace app/IndexBundle/Controller/
 

 * @Route("/login", name="login")
 */
public function loginAction(Request $request)
{
    // Recupera el servicio de autenticación
    $authenticationUtils = $this->get('security.authentication_utils');

    // Recupera, si existe, el último error al intentar hacer login
    $error = $authenticationUtils->getLastAuthenticationError();

    // Recupera el último nombre de usuario introducido
    $lastUsername = $authenticationUtils->getLastUsername();

    // Renderiza la plantilla, enviándole, si existen, el último error y nombre de usuario
    return $this->render('security/login.html.twig', array(
        'last_username' => $lastUsername,
        'error'         => $error,
    ));
}